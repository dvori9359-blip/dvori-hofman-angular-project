<div class="main-container">
  <header class="teams-header">
    <h1>My Teams</h1>
    <div class="create-team-box">
      <input type="text" placeholder="New team name..." #teamNameInput>
      <button (click)="createNewTeam(teamNameInput.value); teamNameInput.value=''">+ Create New Team</button>
    </div>
  </header>

  <hr>

  <div class="teams-grid">
    <div *ngFor="let team of teamsList()" class="team-card" (click)="onSelectTeam(team.id)">
      <button class="manage-team-btn" (click)="openManageTeamModal(team.id, $event)" title="×œ×”×•×¡×¤×ª ×—×‘×¨">ğŸ‘¥</button>

      <div class="card-icon">ğŸ‘¥</div>
      <h3>{{ team.name }}</h3>
      
      <div class="members-badge">
        <span class="count-number">{{ team.members_count || team.members?.length || 0 }}</span>
        <span class="label">Members</span>
      </div>
      
      <button class="enter-btn">Enter Team</button>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="showTeamModal" (click)="showTeamModal = false">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>Manage Team Members</h2>
      <div class="add-member-row">
        <select [(ngModel)]="selectedUserIdToAdd">
          <option [value]="null">Select user...</option>
          <option *ngFor="let user of allUsersList()" [value]="user.id">{{ user.name }}</option>
        </select>
        <button class="save-btn" (click)="addMemberToTeam()" [disabled]="!selectedUserIdToAdd">Add</button>
      </div>

      <div class="members-list-area">
        <h3>Current Members:</h3>
        <ul class="clean-list">
          <li *ngFor="let m of currentTeamMembers()" class="member-item-row">
            <span>ğŸ‘¤ {{ m.name }}</span>
            <button class="delete-member-btn" (click)="removeMember(m.id)" title="×”×¡×¨ ××”×¦×•×•×ª">ğŸ—‘ï¸</button>
          </li>
        </ul>
      </div>
      <div class="modal-actions">
        <button class="cancel-btn" (click)="showTeamModal = false">Close</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay alert-layer" *ngIf="alertMessage()" (click)="alertMessage.set(null)">
    <div class="modal-content alert-box">
      <p>{{ alertMessage() }}</p>
      <button class="save-btn" (click)="alertMessage.set(null)">OK</button>
    </div>
  </div>
</div>